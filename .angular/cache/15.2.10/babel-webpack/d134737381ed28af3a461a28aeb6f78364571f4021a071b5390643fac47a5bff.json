{"ast":null,"code":"import { EnterWrestlerDetailsComponent } from '../enter-wrestler-details/enter-wrestler-details.component';\nimport { MatchDetailsComponent } from '../match-details/match-details.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/button\";\nfunction EnterPlayersComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\");\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const a_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", a_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r2.name);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_img_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 22);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n  if (rf & 2) {\n    const match_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", match_r7 == null ? null : match_r7.player2 == null ? null : match_r7.player2.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 24);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_img_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 22);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_img_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const match_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", match_r7 == null ? null : match_r7.player1 == null ? null : match_r7.player1.name, \" VS \", match_r7 == null ? null : match_r7.player2 == null ? null : match_r7.player2.name, \"\");\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const match_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", match_r7 == null ? null : match_r7.player1 == null ? null : match_r7.player1.name, \" got a BYE!\");\n  }\n}\nfunction EnterPlayersComponent_div_11_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13)(3, \"div\");\n    i0.ɵɵelement(4, \"img\", 14);\n    i0.ɵɵtemplate(5, EnterPlayersComponent_div_11_div_4_img_5_Template, 1, 0, \"img\", 15);\n    i0.ɵɵtemplate(6, EnterPlayersComponent_div_11_div_4_img_6_Template, 1, 0, \"img\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵtemplate(8, EnterPlayersComponent_div_11_div_4_img_8_Template, 1, 1, \"img\", 17);\n    i0.ɵɵtemplate(9, EnterPlayersComponent_div_11_div_4_ng_template_9_Template, 1, 0, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(11, EnterPlayersComponent_div_11_div_4_img_11_Template, 1, 0, \"img\", 15);\n    i0.ɵɵtemplate(12, EnterPlayersComponent_div_11_div_4_img_12_Template, 1, 0, \"img\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(13, EnterPlayersComponent_div_11_div_4_div_13_Template, 3, 2, \"div\", 19);\n    i0.ɵɵtemplate(14, EnterPlayersComponent_div_11_div_4_ng_template_14_Template, 2, 1, \"ng-template\", null, 20, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(16, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function EnterPlayersComponent_div_11_div_4_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const match_r7 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.checkMatchDetails(match_r7.match));\n    });\n    i0.ɵɵtext(17, \"Check Match Details\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const match_r7 = ctx.$implicit;\n    const _r12 = i0.ɵɵreference(10);\n    const _r17 = i0.ɵɵreference(15);\n    const phaseindex_r5 = i0.ɵɵnextContext().index;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", match_r7 == null ? null : match_r7.player1 == null ? null : match_r7.player1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", match_r7.winner == match_r7.player1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", match_r7.winner == match_r7.player1 && phaseindex_r5 == ctx_r6.phasearr.length - 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !match_r7.pass)(\"ngIfElse\", _r12);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", match_r7.winner == match_r7.player2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", match_r7.winner == match_r7.player2 && phaseindex_r5 == ctx_r6.phasearr.length - 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !match_r7.pass)(\"ngIfElse\", _r17);\n  }\n}\nfunction EnterPlayersComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9);\n    i0.ɵɵtemplate(4, EnterPlayersComponent_div_11_div_4_Template, 18, 9, \"div\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const phase_r4 = ctx.$implicit;\n    const phaseindex_r5 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Phase \", phaseindex_r5 + 1, \" of the tournament\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", phase_r4);\n  }\n}\nexport let EnterPlayersComponent = /*#__PURE__*/(() => {\n  class EnterPlayersComponent {\n    constructor(dialog) {\n      this.dialog = dialog;\n      this.phasearr = [];\n      this.images = [\"assets/lara.png\", \"assets/john1.png\", \"assets/rock.png\", \"assets/WWE-PNG-Free-Download.png\", \"/assets/charlotte-flair.png\"];\n      this.playersData = [\n        // {\n        //     name: 'Wrestler A',\n        //     health: 100,\n        //     image:\"./../assets/lara.png\",\n        //     moves: [\n        //       { name: 'Move A', damage: 45, type: 'signature' },\n        //       { name: 'Move B', damage: 20, type: 'signature' },\n        //       { name: 'Finishing Move', damage: 100, type: 'finisher' },\n        //     ],\n        //   },\n        //   {\n        //     name: 'Wrestler B',\n        //     health: 110,\n        //     image:\"./../assets/john1.png\",\n        //     moves: [\n        //       { name: 'Move X', damage: 35, type: 'signature' },\n        //       { name: 'Move Y', damage: 25, type: 'signature' },\n        //       { name: 'Ultimate Slam', damage: 95, type: 'finisher' },\n        //     ],\n        //   },\n        //   {\n        //     name: 'Wrestler C',\n        //     health: 90,\n        //     image:\"./../assets/rock.png\",\n        //     moves: [\n        //       { name: 'Power Punch', damage: 40, type: 'signature' },\n        //       { name: 'Quick Kick', damage: 15, type: 'signature' },\n        //       { name: 'Thunder Strike', damage: 110, type: 'finisher' },\n        //     ],\n        //   },\n        //   {\n        //     name: 'Wrestler D',\n        //     health: 90,\n        //     image:\"./../assets/WWE-PNG-Free-Download.png\",\n        //     moves: [\n        //       { name: 'Power Punch', damage: 40, type: 'signature' },\n        //       { name: 'Quick Kick', damage: 15, type: 'signature' },\n        //       { name: 'Thunder Strike', damage: 110, type: 'finisher' },\n        //     ],\n        //   },\n        // {\n        //   name: 'Wrestler E',\n        //   health: 90,\n        //   image:\"./../assets/charlotte-flair.png\",\n        //   moves: [\n        //     { name: 'Power Punch', damage: 40, type: 'signature' },\n        //     { name: 'Quick Kick', damage: 15, type: 'signature' },\n        //     { name: 'Thunder Strike', damage: 110, type: 'finisher' },\n        //   ],\n        // },\n      ];\n    }\n    openDialog() {\n      const dialogRef = this.dialog.open(EnterWrestlerDetailsComponent, {});\n      dialogRef.afterClosed().subscribe(result => {\n        console.log(result);\n        if (result && result.type == 'confirm') {\n          const playerDataWithImage = {\n            ...result.data,\n            image: this.images[this.playersData.length % this.images.length]\n          };\n          this.playersData.push(playerDataWithImage);\n        }\n        console.log('The dialog was closed');\n        console.log(this.playersData);\n      });\n    }\n    startPlay() {\n      this.winner = {};\n      let currentRoundWrestlers = structuredClone(this.playersData);\n      console.log(\"Current\", currentRoundWrestlers);\n      console.log(\"main\", this.playersData);\n      let roundNumber = 1;\n      this.phasearr = [];\n      while (currentRoundWrestlers.length > 1) {\n        console.log(`Phase ${roundNumber}:`);\n        const temp = [];\n        const winners = [];\n        while (currentRoundWrestlers.length > 1) {\n          const randomIndexA = Math.floor(Math.random() * currentRoundWrestlers.length);\n          const wrestlerA = currentRoundWrestlers.splice(randomIndexA, 1)[0];\n          const randomIndexB = Math.floor(Math.random() * currentRoundWrestlers.length);\n          const wrestlerB = currentRoundWrestlers.splice(randomIndexB, 1)[0];\n          const match = this.runMatch(wrestlerA, wrestlerB);\n          temp.push(match);\n          winners.push(wrestlerA.health > 0 ? wrestlerA : wrestlerB);\n        }\n        if (currentRoundWrestlers.length === 1) {\n          winners.push(currentRoundWrestlers[0]);\n          console.log(`${currentRoundWrestlers[0].name} receives a bye.`);\n          temp.push({\n            \"match\": [`${currentRoundWrestlers[0].name} receives a bye.`],\n            \"player1\": currentRoundWrestlers[0],\n            \"player2\": null,\n            \"winner\": currentRoundWrestlers[0],\n            \"pass\": true\n          });\n        }\n        this.phasearr.push(temp);\n        currentRoundWrestlers = winners;\n        roundNumber++;\n      }\n      const ultimateWinner = currentRoundWrestlers[0];\n      if (this.playersData.length === 1) {\n        console.log(`${currentRoundWrestlers[0].name} receives a bye.`);\n        this.phasearr.push([{\n          \"match\": [`${currentRoundWrestlers[0].name} receives a bye.`],\n          \"player1\": currentRoundWrestlers[0],\n          \"player2\": null,\n          \"winner\": currentRoundWrestlers[0],\n          \"pass\": true\n        }]);\n      }\n      console.log(`The ultimate winner is ${ultimateWinner.name}!`);\n      this.winner = ultimateWinner;\n      console.log(\"Final,\", this.phasearr);\n    }\n    runMatch(wrestlerA, wrestlerB) {\n      console.log(`Match: ${wrestlerA.name} vs. ${wrestlerB.name}`);\n      let round = 1;\n      var fullmatcharr = {\n        \"match\": [],\n        \"player1\": wrestlerA,\n        \"player2\": wrestlerB,\n        \"winner\": {}\n      };\n      fullmatcharr.match.push(`Match: ${wrestlerA.name} vs. ${wrestlerB.name}`);\n      while (wrestlerA.health > 0 && wrestlerB.health > 0) {\n        fullmatcharr.match.push(`Before round ${wrestlerA.name}'s health: ${wrestlerA.health}.`);\n        fullmatcharr.match.push(`Before round ${wrestlerB.name}'s health: ${wrestlerB.health}.`);\n        console.log(`Round ${round}:`);\n        fullmatcharr.match.push(`Round ${round}:`);\n        const player1moves = this.performMove(wrestlerA, wrestlerB);\n        fullmatcharr.match.push(...player1moves);\n        if (wrestlerB.health <= 0) {\n          fullmatcharr.match.push(`${wrestlerB.name}'s health is below 0. ${wrestlerA.name} wins!`);\n          fullmatcharr.winner = wrestlerA;\n          console.log(`${wrestlerB.name}'s health is below 0. ${wrestlerA.name} wins!`);\n          break;\n        }\n        const player2moves = this.performMove(wrestlerB, wrestlerA);\n        fullmatcharr.match.push(...player2moves);\n        if (wrestlerA.health <= 0) {\n          fullmatcharr.match.push(`${wrestlerA.name}'s health is below 0. ${wrestlerB.name} wins!`);\n          fullmatcharr.winner = wrestlerB;\n          console.log(`${wrestlerA.name}'s health is below 0. ${wrestlerB.name} wins!`);\n          break;\n        }\n        round++;\n      }\n      console.log(fullmatcharr);\n      return fullmatcharr;\n    }\n    performMove(attacker, defender) {\n      const randomMoveIndex = Math.floor(Math.random() * attacker.moves.length);\n      const move = attacker.moves[randomMoveIndex];\n      const movearr = [];\n      console.log(`${attacker.name} performs ${move.name} which has damage ${move.damage} on ${defender.name}.`);\n      movearr.push(`${attacker.name} performs ${move.name} which has damage ${move.damage} on ${defender.name}.`);\n      if (move.type === 'finisher' && defender.health > 45 && Math.random() > 0.5) {\n        console.log(`But the ${move.name} fails!`);\n        movearr.push(`But the ${move.name} fails!`);\n      } else {\n        defender.health -= move.damage;\n      }\n      console.log(`${defender.name}'s health: ${defender.health}.`);\n      console.log(`${attacker.name}'s health: ${attacker.health}.`);\n      movearr.push(`${defender.name}'s health: ${defender.health}.`);\n      movearr.push(`${attacker.name}'s health: ${attacker.health}.`);\n      return movearr;\n    }\n    checkMatchDetails(matchDetails) {\n      console.log(matchDetails);\n      const dialogRef = this.dialog.open(MatchDetailsComponent, {\n        data: {\n          match: matchDetails\n        }\n      });\n    }\n    static #_ = this.ɵfac = function EnterPlayersComponent_Factory(t) {\n      return new (t || EnterPlayersComponent)(i0.ɵɵdirectiveInject(i1.MatDialog));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EnterPlayersComponent,\n      selectors: [[\"app-enter-players\"]],\n      decls: 12,\n      vars: 4,\n      consts: [[1, \"pool-of-wrestlers\"], [\"color\", \"primary\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [1, \"wrestlers_block\"], [\"class\", \"wrestler-for\", 4, \"ngFor\", \"ngForOf\"], [1, \"center-elements\", \"margin-top\"], [4, \"ngFor\", \"ngForOf\"], [1, \"wrestler-for\"], [\"alt\", \"\", 1, \"wrestler-image\", 3, \"src\"], [1, \"phase\"], [\"class\", \"phase-block\", 4, \"ngFor\", \"ngForOf\"], [1, \"phase-block\"], [1, \"font-adjustment\"], [1, \"center-elements\"], [\"alt\", \"\", 1, \"image-size\", 3, \"src\"], [\"src\", \"assets/winner.png\", \"alt\", \"\", \"class\", \"winner-image\", 4, \"ngIf\"], [\"src\", \"assets/belt.png\", \"alt\", \"\", \"class\", \"winner-image\", 4, \"ngIf\"], [\"class\", \"image-size\", \"alt\", \"\", 3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"unknown\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"unknown2\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"src\", \"assets/winner.png\", \"alt\", \"\", 1, \"winner-image\"], [\"src\", \"assets/belt.png\", \"alt\", \"\", 1, \"winner-image\"], [\"src\", \"assets/unknown.jpeg\", \"alt\", \"\", 1, \"image-size\"]],\n      template: function EnterPlayersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"p\", 1);\n          i0.ɵɵtext(3, \"Pool of Wrestlers in the tournament\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function EnterPlayersComponent_Template_button_click_4_listener() {\n            return ctx.openDialog();\n          });\n          i0.ɵɵtext(5, \"Add Wrestler\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 3);\n          i0.ɵɵtemplate(7, EnterPlayersComponent_div_7_Template, 5, 2, \"div\", 4);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function EnterPlayersComponent_Template_button_click_9_listener() {\n            return ctx.startPlay();\n          });\n          i0.ɵɵtext(10, \"Play Game\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(11, EnterPlayersComponent_div_11_Template, 5, 2, \"div\", 6);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.playersData.length >= 5);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.playersData);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.playersData.length == 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.phasearr);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.MatButton],\n      styles: [\".pool-of-wrestlers[_ngcontent-%COMP%]{text-align:center;font-family:ui-sans-serif;font-size:1.5rem;margin-top:2rem;color:#fff}.pool-of-wrestlers[_ngcontent-%COMP%]   .wrestlers_block[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;flex-wrap:wrap}.pool-of-wrestlers[_ngcontent-%COMP%]   .wrestler-for[_ngcontent-%COMP%]{margin:2rem}.pool-of-wrestlers[_ngcontent-%COMP%]   .wrestler-image[_ngcontent-%COMP%]{width:10rem;height:10rem}.center-elements[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center}.image-size[_ngcontent-%COMP%]{width:10rem;height:10rem}.winner-image[_ngcontent-%COMP%]{width:7rem;margin-top:-10rem;transform:rotate(-28.8329deg) scale(1)}.phase[_ngcontent-%COMP%]{margin:2rem;display:flex;justify-content:center;flex-wrap:wrap}.phase[_ngcontent-%COMP%]   .phase-block[_ngcontent-%COMP%]{width:20rem;margin:1rem}.phase[_ngcontent-%COMP%]   .font-adjustment[_ngcontent-%COMP%]{text-align:center;font-family:ui-sans-serif;font-size:1.5rem}.margin-top[_ngcontent-%COMP%]{margin-top:1rem;color:#fff;font-family:ui-sans-serif}\"]\n    });\n  }\n  return EnterPlayersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}